<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Forum Posts</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        margin: 20px;
        padding: 0;
        background-color: #f4f4f4;
      }
      .nav-bar {
        background: #2369da;
        color: white;
        padding: 10px;
        text-align: left;
        border-radius: 20px;
      }
      .nav-bar a {
        color: white;
        margin: 0 10px;
        text-decoration: none;
      }
      .post-form,
      .posts-section {
        background: white;
        padding: 15px;
        border-radius: 10px;
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        margin: 20px auto 20px auto; /* Adds space above and below */
        max-width: 800px;
      }

      input,
      textarea,
      select,
      button {
        width: 100%;
        padding: 10px;
        margin-bottom: 10px;
        border: 1px solid #ccc;
        border-radius: 5px;
        box-sizing: border-box;
      }
      button {
        background: #007bff;
        color: white;
        border: none;
        cursor: pointer;
      }
      button:hover {
        background: #0056b3;
      }
      .post {
        background: white;
        padding: 10px; /* Reduce padding inside the box */
        margin: 30px 0; /* Reduce margin between posts */
        border-radius: 10px;
        box-shadow: 0 0 5px rgba(0, 0, 0, 0.1);
        position: relative;
      }

      .comment {
        background: #f9f9f9;
        padding: 10px;
        margin-top: 10px;
        border-radius: 5px;
      }
      .edit-delete {
        display: list-item;
        gap: 5px;
        margin-top: 5px;
      }
      img {
        max-width: 100%;
        height: auto;
        margin-top: 10px;
        border-radius: 5px;
        display: block;
      }
    </style>
  </head>
  <body>
    <div class="nav-bar">
      <a href="#">About</a> | <a href="#">FAQ</a> |
      <a href="forum1.html">Forums</a>
    </div>

    <div class="post-form">
      <h2>Create a Post</h2>
      <select id="postVisibility">
        <option value="public">Public</option>
        <option value="private">Private</option>
      </select>
      <input type="text" id="postTitle" placeholder="Post Title" required />
      <textarea
        id="postContent"
        placeholder="Write something..."
        required
      ></textarea>
      <input type="file" id="postMedia" accept=".jpg,.jpeg" />
      <button onclick="createPost()">Post</button>
    </div>

    <div class="posts-section">
      <h2>Forum Posts</h2>
      <div id="postsContainer"></div>
    </div>

    <script>
      function createPost() {
        const visibilityInput = document.getElementById("postVisibility");
        const titleInput = document.getElementById("postTitle");
        const contentInput = document.getElementById("postContent");
        const mediaInput = document.getElementById("postMedia");

        const title = titleInput.value.trim();
        const content = contentInput.value.trim();
        const visibility = visibilityInput.value;
        const file = mediaInput.files[0];

        if (!title || !content) {
          alert("Title and content are required!");
          return;
        }

        const postContainer = document.getElementById("postsContainer");
        const postDiv = document.createElement("div");
        postDiv.classList.add("post");

        postDiv.innerHTML = `
        <small>Visibility: ${visibility}</small>
        <h3>${title}</h3>
        <p>${content}</p>
        <div class="edit-delete">
          <button onclick="editPost(this)">Edit</button>
          <button onclick="deletePost(this)">Delete</button>
        </div>
        <div class="image-container"></div> <!-- Image will be inserted here -->
        <div class="comments-section">
          <input type="text" class="commentInput" placeholder="Write a comment...">
          <button onclick="addComment(this)">Comment</button>
          <div class="comments-container"></div>
        </div>
      `;

        postContainer.prepend(postDiv);

        if (file) {
          if (!["image/jpeg"].includes(file.type)) {
            alert("Only JPG and JPEG images are allowed.");
            return;
          }

          const reader = new FileReader();
          reader.onload = function (e) {
            const imageContainer = postDiv.querySelector(".image-container");
            imageContainer.innerHTML = `<img src="${e.target.result}" alt="Uploaded Image">`;
          };
          reader.readAsDataURL(file);
        }

        titleInput.value = "";
        contentInput.value = "";
        visibilityInput.value = "public";
        mediaInput.value = "";
      }

      function editPost(button) {
        const post = button.closest(".post");
        const title = post.querySelector("h3");
        const content = post.querySelector("p");

        const newTitle = prompt("Edit Title:", title.textContent);
        const newContent = prompt("Edit Content:", content.textContent);

        if (newTitle.trim() !== "" && newContent.trim() !== "") {
          title.textContent = newTitle;
          content.textContent = newContent;
        } else {
          alert("Title and content cannot be empty.");
        }
      }

      function deletePost(button) {
        button.closest(".post").remove();
      }

      function addComment(button) {
        const commentInput = button.previousElementSibling;
        const commentText = commentInput.value.trim();
        if (!commentText) return;

        const commentsContainer = button.nextElementSibling;
        const commentDiv = document.createElement("div");
        commentDiv.classList.add("comment");
        commentDiv.innerHTML = `
        <p>${commentText}</p>
        <div class="edit-delete">
          <button onclick="editComment(this)">Edit</button>
          <button onclick="deleteComment(this)">Delete</button>
        </div>
      `;

        commentsContainer.appendChild(commentDiv);
        commentInput.value = "";
      }

      function editComment(button) {
        const comment = button.closest(".comment");
        const commentText = comment.querySelector("p");

        const newText = prompt("Edit Comment:", commentText.textContent);
        if (newText.trim() !== "") {
          commentText.textContent = newText;
        } else {
          alert("Comment cannot be empty.");
        }
      }

      function deleteComment(button) {
        button.closest(".comment").remove();
      }
    </script>
  </body>
</html>
